window.tribe=window.tribe||{},tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},tribe.events.virtualAdminZoom=tribe.events.virtualAdminZoom||{},function(e,t,o,n){var i=e(document);t.selectors={configureZoom:".tribe-events-virtual-meetings-zoom-details__generate-zoom-button",displayLinkOption:"#tribe-events-virtual-meetings-zoom-display-details",embedVideoOption:"#tribe-events-virtual-embed-video",hidden:".tribe-events-virtual-hidden",linkedButtonOption:"#tribe-events-virtual-linked-button",accountSelect:".tribe-events-virtual-meetings-zoom-details__account-select-link",hostsDropdown:"#tribe-events-virtual-zoom-host",createOptions:".tribe-events-virtual-meetings-zoom-details__types",meetingHostsDropdown:"#tribe-events-virtual-zoom-host",meetingCreate:".tribe-events-virtual-meetings-zoom-details__create-link",meetingDetails:".tribe-events-virtual-meetings-zoom-details",meetingDetailsFloat:".tribe-events-virtual-meetings-zoom-details--float",meetingRemove:".tribe-events-virtual-meetings-zoom-details__remove-link",remove:".tribe-remove-virtual-event",setupZoomCheckbox:"#tribe-events-virtual-zoom-link-generate",urlField:".tribe-events-virtual-video-source__virtual-url-input",videoSource:"#tribe-events-virtual-video-source",virtualContainer:"#tribe-virtual-events",zoomMeetingsContainer:"#tribe-events-virtual-meetings-zoom",zoomType:'input[name="tribe-events-virtual[zoom-meeting-type]"]:checked',zoomLoader:".tribe-common-c-loader",zoomHiddenElement:".tribe-common-a11y-hidden",zoomMessagesWrap:".tec-events-virtual-video-source-zoom-setup__messages-wrap",zoomMessage:".tribe-events-virtual-settings-message__wrap"},t.originalState={linkedButtonOption:{checked:e(t.selectors.linkedButtonOption).prop("checked")}},t.state={urlField:{value:""}},t.handleAccountSelection=function(o){o.preventDefault();var n=e(o.target).attr("href"),i=e("#tribe-events-virtual-zoom-account option:selected").val();t.show(e(t.selectors.zoomMeetingsContainer)),e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_account_id:i},success:t.onMeetingHandlingSuccess})},t.handleUserValidation=function(o){o.preventDefault();var n=e(t.selectors.hostsDropdown).data("validateUrl"),i=e(t.selectors.hostsDropdown).find("option:selected").val(),s=e(t.selectors.zoomMeetingsContainer).data("accountId");n&&i&&s&&(t.show(e(t.selectors.zoomMeetingsContainer)),e.ajax(n,{contentType:"application/json",context:e(t.selectors.createOptions),data:{zoom_account_id:s,zoom_host_id:i},success:t.onMeetingValidateUserSuccess}))},t.onMeetingValidateUserSuccess=function(o){t.hide(e(t.selectors.zoomMeetingsContainer));const n=e(o).filter(t.selectors.zoomMessage),i=e(o).filter(t.selectors.createOptions);e(t.selectors.zoomMessagesWrap).html(n),0!==i.length&&e(t.selectors.createOptions).replaceWith(i)},t.handleMeetingRequest=function(o){o.preventDefault();var n=e(t.selectors.zoomType).val(),i=e(t.selectors.hostsDropdown).find("option:selected").val(),s=e(t.selectors.zoomMeetingsContainer).data("accountId");t.show(e(t.selectors.zoomMeetingsContainer)),e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_host_id:i,zoom_account_id:s},success:t.onMeetingHandlingSuccess})},t.handleRemoveRequest=function(o){if(o.preventDefault(),confirm(tribe_events_virtual_placeholder_strings.removeConfirm)){var n=e(o.target).attr("href");n&&t.removeRequestAjax(n)}},t.removeRequestAjax=function(o){e.ajax(o,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),success:t.onMeetingHandlingSuccess})},t.onMeetingHandlingSuccess=function(n){e(t.selectors.zoomMeetingsContainer).replaceWith(n),t.setupControls(),t.checkButtons(),t.initTribeDropdowns(),e(o.selectors.videoSource).trigger("verify.dependency"),o.handleShowOptionInteractivity&&"function"==typeof o.handleShowOptionInteractivity&&o.handleShowOptionInteractivity()},t.handleAutoDetectZoom=function(n,i){if(!i.html)return;const s=e(i.html).filter(t.selectors.zoomMeetingsContainer);0!==s.length&&(e(t.selectors.zoomMeetingsContainer).html(s),t.setupControls(),t.checkButtons(),t.initTribeDropdowns(),e(o.selectors.videoSource).val("zoom").trigger("change").trigger("verify.dependency"),o.handleShowOptionInteractivity&&"function"==typeof o.handleShowOptionInteractivity&&o.handleShowOptionInteractivity())},t.waitForVirtualEventsToLoad=function(){var o=10,n=setInterval(function(){o--,(e(t.selectors.meetingDetails).length||0===o)&&clearInterval(n)},200)},t.handleLinkedMetaRemove=function(){var o=e(t.selectors.meetingRemove).attr("href");o&&t.removeRequestAjax(o)},t.bindEvents=function(){e(t.selectors.virtualContainer).on("click",t.selectors.configureZoom,t.setZoomCheckboxCheckedAttr(!0)).on("click",t.selectors.accountSelect,t.handleAccountSelection).on("click",t.selectors.meetingCreate,t.handleMeetingRequest).on("click",t.selectors.meetingRemove,t.handleRemoveRequest),i.on("virtual.delete",t.handleLinkedMetaRemove),i.on("autodetect.complete",t.handleAutoDetectZoom),i.on("change",t.selectors.meetingHostsDropdown,t.handleUserValidation)},t.checkButtons=function(){var o=e(t.selectors.displayLinkOption);e(t.selectors.linkedButtonOption).prop("checked",!0),o.prop("checked",!0)},t.setupControls=function(){var o=e(t.selectors.urlField),n=e(t.selectors.embedVideoOption).closest("li"),i=e(t.selectors.displayLinkOption).closest("li"),s=e(t.selectors.linkedButtonOption);e(t.selectors.meetingDetails).length?(n.addClass(t.selectors.hidden.className()),i.removeClass(t.selectors.hidden.className()),t.state.urlField.value=o.val(),o.val("")):(o.prop({disabled:!1}).attr("placeholder",tribe_events_virtual_placeholder_strings.video),n.removeClass(t.selectors.hidden.className()),i.addClass(t.selectors.hidden.className()),s.prop("checked",t.originalState.linkedButtonOption.checked),o.val(t.state.urlField.value),t.state.urlField.value="")},t.initTribeDropdowns=function(){e(document).find(t.selectors.zoomMeetingsContainer).find(n.selector.dropdown).not(n.selector.created).tribe_dropdowns()},t.setZoomCheckboxCheckedAttr=function(o){return function(){e(t.selectors.setupZoomCheckbox).prop("checked",o).trigger("verify.dependency")}},t.handleMeetingDetailsClasses=function(){console.info("Method deprecated and replaced with virtualAdmin.handleVideoSourceClasses.");var o=e(t.selectors.meetingDetails);if(o.length){var n=e(t.selectors.urlField);n.parent().width()>=o.outerWidth(!0)+n.outerWidth(!0)?o.addClass(t.selectors.meetingDetailsFloat.className()):o.removeClass(t.selectors.meetingDetailsFloat.className())}},t.show=function(e){const o=e.find(t.selectors.zoomLoader);o.length&&o.removeClass(t.selectors.zoomHiddenElement.className())},t.hide=function(e){const o=e.find(t.selectors.zoomLoader);o.length&&o.addClass(t.selectors.zoomHiddenElement.className())},t.ready=function(){t.bindEvents()},e(t.ready)}(jQuery,tribe.events.virtualAdminZoom,tribe.events.virtualAdmin,tribe_dropdowns);