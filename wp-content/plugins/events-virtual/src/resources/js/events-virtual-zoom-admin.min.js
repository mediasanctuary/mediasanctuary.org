window.tribe=window.tribe||{},tribe.events=tribe.events||{},tribe.events.views=tribe.events.views||{},tribe.events.virtualAdmin=tribe.events.virtualAdmin||{},tribe.events.virtualAdminZoom=tribe.events.virtualAdminZoom||{},function(e,t,i,n){e(document),e(window);t.selectors={configureZoom:".tribe-events-virtual-meetings-zoom-details__generate-zoom-button",displayLinkOption:"#tribe-events-virtual-meetings-zoom-display-details",embedVideoOption:"#tribe-events-virtual-embed-video",hidden:".tribe-events-virtual-hidden",linkedButtonOption:"#tribe-events-virtual-linked-button",meetingCreate:".tribe-events-virtual-meetings-zoom-details__create-link",meetingDetails:".tribe-events-virtual-meetings-zoom-details",meetingDetailsFloat:".tribe-events-virtual-meetings-zoom-details--float",meetingRemove:".tribe-events-virtual-meetings-zoom-details__remove-link",remove:".tribe-remove-virtual-event",setupZoomCheckbox:"#tribe-events-virtual-zoom-link-generate",urlField:".tribe-events-virtual-video-source__virtual-url-input",virtualContainer:"#tribe-virtual-events",zoomMeetingsContainer:"#tribe-events-virtual-meetings-zoom",zoomType:'input[name="tribe-events-virtual[zoom-meeting-type]"]:checked'},t.originalState={linkedButtonOption:{checked:e(t.selectors.linkedButtonOption).prop("checked")}},t.state={urlField:{value:""}},t.handleMeetingRequest=function(i){i.preventDefault();var n=e(t.selectors.zoomType).val(),o=e("#tribe-events-virtual-zoom-host option:selected").val();e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),data:{zoom_host_id:o},success:t.onMeetingHandlingSuccess})},t.handleRemoveRequest=function(i){i.preventDefault();var n=e(i.target).attr("href");e.ajax(n,{contentType:"application/json",context:e(t.selectors.zoomMeetingsContainer),success:t.onMeetingHandlingSuccess})},t.onMeetingHandlingSuccess=function(n){e(t.selectors.zoomMeetingsContainer).replaceWith(n),t.setupControls(),t.checkButtons(),t.handleMeetingDetailsClasses(),t.initMultipleControlsAccordion(),t.initTribeDropdowns(),e(t.selectors.setupZoomCheckbox).trigger("setup.dependency"),i.handleShowOptionInteractivity&&"function"==typeof i.handleShowOptionInteractivity&&i.handleShowOptionInteractivity()},t.waitForVirtualEventsToLoad=function(){var i=10,n=setInterval(function(){i--,(e(t.selectors.meetingDetails).length||0===i)&&(t.handleMeetingDetailsClasses(),clearInterval(n))},200)},t.handleMeetingDetailsClasses=function(){var i=e(t.selectors.meetingDetails);if(i.length){var n=e(t.selectors.urlField);n.parent().width()>=i.outerWidth(!0)+n.outerWidth(!0)?i.addClass(t.selectors.meetingDetailsFloat.className()):i.removeClass(t.selectors.meetingDetailsFloat.className())}},t.handleLinkedMetaRemove=function(){e(t.selectors.meetingRemove).click()},t.bindEvents=function(){e(t.selectors.virtualContainer).on("verify.dependency",t.waitForVirtualEventsToLoad).on("click",t.selectors.configureZoom,t.setZoomCheckboxCheckedAttr(!0)).on("click",t.selectors.meetingCreate,t.handleMeetingRequest).on("click",t.selectors.remove,t.handleLinkedMetaRemove).on("click",t.selectors.meetingRemove,t.handleRemoveRequest),e(window).on("resize",t.handleMeetingDetailsClasses)},t.checkButtons=function(){var i=e(t.selectors.displayLinkOption);e(t.selectors.linkedButtonOption).prop("checked",!0),i.prop("checked",!0)},t.setupControls=function(){var i=e(t.selectors.urlField),n=e(t.selectors.embedVideoOption).closest("li"),o=e(t.selectors.displayLinkOption).closest("li"),s=e(t.selectors.linkedButtonOption);e(t.selectors.meetingDetails).length?(i.prop({disabled:!0}).attr("placeholder",tribe_events_virtual_placeholder_strings.zoom),n.addClass(t.selectors.hidden.className()),o.removeClass(t.selectors.hidden.className()),t.state.urlField.value=i.val(),i.val("")):(i.prop({disabled:!1}).attr("placeholder",tribe_events_virtual_placeholder_strings.video),n.removeClass(t.selectors.hidden.className()),o.addClass(t.selectors.hidden.className()),s.prop("checked",t.originalState.linkedButtonOption.checked),i.val(t.state.urlField.value),t.state.urlField.value="")},t.initTribeDropdowns=function(){e(document).find(t.selectors.zoomMeetingsContainer).find(n.selector.dropdown).not(n.selector.created).tribe_dropdowns()},t.initMultipleControlsAccordion=function(){if(tribe.events.views.accordion){var t=tribe.events.views.accordion,i=e("#tribe-events-virtual-meetings-zoom.tribe-events-virtual-meetings-zoom-controls--multi");t.bindAccordionEvents(i)}},t.setZoomCheckboxCheckedAttr=function(i){return function(){e(t.selectors.setupZoomCheckbox).prop("checked",i).trigger("verify.dependency")}},t.ready=function(){t.bindEvents(),t.handleMeetingDetailsClasses(),t.initMultipleControlsAccordion()},e(t.ready)}(jQuery,tribe.events.virtualAdminZoom,tribe.events.virtualAdmin,tribe_dropdowns);